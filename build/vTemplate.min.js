/*
 *@name     vTemplate
 *@version  v0.1.0
 *@desc     An Easy Javascript Template.
 *@author   VeeQun
 *@license  MIT
 *@modified 2014-05-06
 */
!function(Global){function vTemplate(tpl){var that={},info={tpl:tpl};return that.compile=function(){if("function"!=typeof that.render){var tpl=info.tpl.replace(/\"|\'/gm,'\\"'),evalString='that.render=function(data) {var out="";'+__compile__(tpl)+";return out;}";eval(evalString)}},that}function __compile__(stpl,config){var stplReg=consts.stplReg;stplReg.lastIndex=0;for(var step=null,oldIndex=0,compiled="",ignored=config&&config.ignored||[];step=stplReg.exec(stpl);)if(compiled+=prefix.str+stpl.slice(oldIndex,stplReg.lastIndex-step[0].length)+posifix.str,oldIndex=stplReg.lastIndex,"="==step[1]){var step_2=step[2].replace(/\\\"/gm,'"');compiled+=(inArray(ignored,step_2)?prefix.arrKw:prefix.attr)+step_2+posifix.semicolon}else if("@"==step[3]){var subStpl=stpl.slice(oldIndex+1),endFlag="</@"+step[4]+">",endIndex=subStpl.indexOf(endFlag);subStpl=subStpl.slice(0,endIndex);var lastIndex=oldIndex+subStpl.length+endFlag.length+1,match=step[0],args=match.slice(match.indexOf("(")+1,match.indexOf(")")).replace(/(\w+)/gm,'"$1"');eval("compiled+="+step[4]+"("+args+",subStpl)"),stplReg.lastIndex=oldIndex=lastIndex}var tail=prefix.str+stpl.slice(oldIndex)+posifix.str;return compiled+tail}function each(a,b,c,d){if(!c||!d){var e=!0;d=b}var f=__compile__(d,{ignored:e?[]:[b,c]}),g="for(var k=0,curr=data."+a+",len=curr.length;k<len;k++){"+(e?"":"var "+b+"=k,"+c+"=curr[k];")+f+"}";return g}function inArray(a,b){if("indexOf"in a)return-1!==a.indexOf(b);for(var c=a.length;c;)if(a[--c]==b)return!0;return!1}var consts={stplReg:/\<(\=)([^\<\=\>]+?)\>|\<(\@)([^\<\@\=]+?)\(\s*(?:[^\s\,]+)(?:\s*\,\s*(?:[^\s\,]+)){0,}\s*\)/gm},prefix={str:"out+='",arrKw:"out+=",attr:"out+=data."},posifix={str:"';",semicolon:";"};Global.vTemplate=vTemplate}(this);